#### 엔티티 매니저 팩토리와 엔티티 매니저
+ 엔티티 매니저는 엔티티를 저장/수정/삭제/조회하는 등 엔티티와 관련된 모든 일을 처리한다.
+ 데이터베이스를 하나만 사용하는 애플리케이션은 일반적으로 `Entity Manager Factory`를 하나만 생성한다.
+ `엔티티 매니저 팩토리`는 말 그대로 공장인데 이 공장을 만드는 비용이 상당히 커서 한 개만 만드어서 애플리케이션 전체에서 공유하도록 설계되어 있다.
+ `엔티티 매니저 팩토리`는 어려 스레드기 동시에 접근해도 안전하므로 다른 스레드 간에 공유가 가능하지만 엔티티 매니저는 어려 스레드가 동시에 접근하면 동시성 문제가 발생하므로 스레드 간에 공유는 절대 안 된다.
+ `엔티티 매니저`는 데이터베이스 연결이 꼭 필요한 시점까지 커넥션을 얻지 않는다.
+ 예를들어, 트랜잭션을 시작할 때 커넥션을 획득한다.
+ 하이버네이트를 포함한 JPA 구현체들은 `Entity Manager Factory`를 생성할 때 커넥션풀도 만드는데 J2SE 환경(스프링 프레임워크 포함)에서 사용하는 방법이다.

#### 영속성 컨텍스트란?
+ `영속성 컨텍스트`를 우리말로 해석하자면 `엔티티를 영구 저장하는 환결`이라는 뜻이다.
+ 엔티티 매니저로 엔티티를 저장하거나 조회하면 엔티티 매니저는 영속성 컨텍스트에 엔티티를 보관하고 관리한다.
+ 영속성 컨텍스트는 엔티티 매니저를 생성할 때 하나 만들어진다.(여러 엔티티 매니저가 같은 영속성 컨텍스트에 접근할 수 있다.)
+ 엔티티 매니저를 통해서 영속성 컨텍스트에 접근할 수 있고, 영속성 컨텍스트를 관리할 수 있다.
+ 엔티티의 생명주가
  + 비영속 : 영속성 컨텍스트와 전혀 관계가 없는 상태
    + 엔티티 객체를 생성한 경우 순수한 객체 상태이며 아직 저장하지 않은 상태이다.
    + 따라서 영속성 컨텍스트나 데이터베이스와는 전혀 관련이 없다.
  + 영속 : 영속성 컨텍스트에 저장된 상태
    + 엔티티 매니저를 통해서 엔티티를 영속성 컨텍스트에 저장한 경우 영속성 컨텍스트에 의해 관리된다는 뜻이다.
    + `.find`나 `JPQL`을 사용해서 조회한 엔티티도 영속성 컨텍스트가 관리하는 영속 상태다.
  + 준영속 : 영속성 컨텍스트에 저장되었다가 분리된 상태
    + 영속성 컨텍스트가 관리하던 영속 상태의 엔티티를 영속성 컨텍스트가 관리하지 않으면 준영속 상태가 된다.
    + 특정 엔티티를 준영속 상태로 만들려면 `.detach()`를 호출하면 된다.
    + `.close()`를 호출해서 영속성 컨텍스트를 닫거나 `.clear`를 호출해서 영속성 컨텍스트를 초기화해도 영속성 컨텍스트가 관리하던 영속 상태의 엔티티는 준영속 상태가 된다.
  + 삭제 : 삭제된 상태
    + 엔티티를 영속성 컨텍스트와 데이터베이스에서 삭제한다.
